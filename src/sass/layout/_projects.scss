$project-number: 0;
$project-title: .2;
$content-p: .4;
$content-button: .6;
$left-max: .6;

$lg-image: 0;
$logo: .4;



#projects {
  width: 100%;
  height: 100vh;
  &:after {
    content: '';
    @include absolute-cover;
      
  }
  .bg-image {
    height: 100%;
    li {
      opacity: 0;
      transition: $animate;
      &.active {
        opacity: .2;
      }
    }
  }
  .col-2 {
    position: relative;
    z-index: 2;
    height: 100%;
  }
  article {
    padding-left: 6vw;
    padding-top: 10vh;
    .title {
      position: relative;
      margin-bottom: 7rem;
      #project-number {
        display: block;
        transform: translateY(-.5em);
        opacity: 0;
        transition: all .3s ease-out $left-max - $project-number + 0s;
      }
      #project-title {
        font-size: 100px;
        position: absolute;
        left: .75em;
        bottom: -25%;
        opacity: 0;
        transition: all .3s ease-out $left-max - $project-title + 0s;
      }
    }
    .content {
      padding-left: 15%;
      max-width: 800px;
      p, .button {
        transform: translateX(-2rem);
        opacity: 0;
        transition: all .3s ease-in-out;
      }
      p {
        transition-delay: $left-max - $content-p + 0s
      }
      .button {
        background-color: $white;
        transition-delay: $left-max - $content-button + 0s
      }
    }
  }
  aside {
    position: relative;
    .logo {
      width: 12.5rem;
      height: 12.5rem;
      padding: 1.25rem;
      position: absolute;
      top: 0;
      right: 0;
      z-index: 10;
      border-bottom-left-radius: $square;
      transform: scale(0);
      transition: all .3s ease-in-out $logo + 0s;
      .image {
        height: 100%;
        position: relative;
      }
      img {
        @include absolute-center;
      }
    }
    .gallery-container {
      padding: $square 4rem $square $square;
      height: 100%;
      .image-inner {
        position: relative;
        overflow: hidden;
        height: 100%;
        z-index: 2;
        transform: translateY(.5rem);
      }
      ul.image-slider {
        height: 100%;
        li {
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          &:first-child {
            left: 0;
            transform: translateX(2rem);
            opacity: 0;
            transition: transform .4s ease-out $lg-image + 0s, opacity .4s ease-out $lg-image + 0s;
          }
          &.in-left {
            animation: in-left .4s ease-out 0s 1 forwards;
          }
          &.in-right {
            animation: in-right .4s ease-out 0s 1 forwards;
          }
        }
      }
        ul.preview-container {
          display: flex;
          position: absolute;
          width: 100%;
          bottom: 0;
          left: 0;
          overflow: hidden;
          z-index: 10;
          &:hover li.magnifier {
            opacity: 1;
          }
          li {
            flex-basis: 25%;
            background-color: $white;
            position: relative;
            transition: $animate;
            transform: translateY(100%);
            &.magnifier {
              position: absolute;
              top: 0;
              width: 25%;
              height: 100%;
              transition: $animate;
              opacity: 0;
              pointer-events: none;
            }
            .preview-image {
              width: 100%;
              padding-bottom: 100%;
            }
            }
            $start: 1;
            $end: 4;
            @for $i from $start through $end {
              li:nth-child(#{$i}) {
              //    transition-delay:  (($end + 1 - $i) * .1) + $lg-image +  0s;
              }
            }
        }
    }
    nav {
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      display: flex;
      align-items: flex-end;
      ul.arrows {
        transition: $animate;
        li {
          width: $square;
          height: $square;
          color: $white;
          position: relative;
        }
        .preview-image {
          pointer-events: none
        }
      }
      .progress {
        position: relative;
        flex-grow: 1;
        height: $square;
        padding: 0 $square;
        transition: $animate;
        .progress-inner {
          position: absolute;
          top: 50%;
          right: 4.5rem;
          transform: translateY(-50%);                  
          width: 100%;
          max-width: 600px;
          background-color: $white;
        }
        .bar {
          width: 66%;
          height: 4px;
          margin-left: auto;
          transition: $animate;
        }
        .current, .total {
          position: absolute;
          padding-top: .5rem;
          font-weight: 700;
        }
        .current {
          left: 0;
        }
        .total {
          right: 0;
        }
      }
    }
  }
}

#projects.loaded {
  article {
    .title {
      #project-number {
        transform: translateY(0);
        opacity: .33;
        transition-delay: $project-number + 0s;
      }
      #project-title {
        left: 1em;
        opacity: 1;
        transition-delay: $project-title + 0s;
      }
    }
    .content {
      p, .button {
        opacity: 1;
        transform: translateX(0);
      }
      p {
        transition-delay: $content-p + 0s;
      }
      .button {
        transition-delay: $content-button + 0s;
      }
    }
  }
  aside {
    .logo {
      transform: scale(1);
    }
    .image-inner {
      box-shadow: -2px 3px 10px 2px rgba(0, 0, 0, .4);
      transition: box-shadow .6s linear .4s
    }
    ul.image-slider li:first-child{
      transform: translateX(0);
      opacity: 1;
      z-index: 1;
    }
    ul.preview-container {
      li {
        transform: translateY(0);
        @for $i from 1 through 4 {
          &:nth-child(#{$i}) {
            transition-delay:  ($i * .1) + .3s;
          }
        }
      }
    }
  }
}

$projects: (
  ('natureworks', $green, $light-green),
  ('anboc', $yellow, $light-yellow),
  ('buywood', $red, $light-red)
);

@each $project in $projects {
  $mainColour: nth($project, 2);
  $lightColour: nth($project, 3);

  .#{nth($project, 1)} {
    background-color: #{nth($project, 2)};
    #projects {
      &:after {
        background: linear-gradient(to right, rgba(0,0,0,0) 0%, $mainColour 70%);
      }
      article .content .button {
        color: $mainColour;
      }
      aside .bar,
      aside .logo {
        background-color: $mainColour;
      }
      aside {
        .gallery-container ul.preview-container li.magnifier {
          background-color: rgba($lightColour, .5);
        }
        nav ul.arrows,
        .progress {
          background-color: $lightColour;
        } 
      } 
    }
  }
}









